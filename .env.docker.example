# Docker 部署环境变量配置

# 应用配置
DEBUG=False
ENVIRONMENT=production
FLASK_PORT=5000

# ================================================================
# 数据库配置（支持外部数据库）
# ================================================================

# 方式1：使用 Docker Compose 内部 MySQL（需要启动时指定 --profile mysql）
DATABASE_URL=mysql+pymysql://app_user:app_password@mysql:3306/morning_news

# 方式2：使用外部 MySQL（注释上面一行，取消注释下面一行）
# DATABASE_URL=mysql+pymysql://username:password@external_host:3306/morning_news

# ================================================================
# Redis 配置（支持外部 Redis）
# ================================================================

# 方式1：使用 Docker Compose 内部 Redis（需要启动时指定 --profile redis）
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# 方式2：使用外部 Redis（注释上面几行，取消注释下面几行）
# REDIS_HOST=external_redis_host
# REDIS_PORT=6379
# REDIS_PASSWORD=your_redis_password
# REDIS_DB=0

# Celery配置（根据 REDIS_HOST 配置）
CELERY_BROKER_URL=redis://redis:6379/1
CELERY_RESULT_BACKEND=redis://redis:6379/2

# ================================================================
# Docker 内部 MySQL 配置（仅在使用 --profile mysql 时需要）
# ================================================================
MYSQL_ROOT_PASSWORD=root_password
MYSQL_DATABASE=morning_news
MYSQL_USER=app_user
MYSQL_PASSWORD=app_password
MYSQL_PORT=3306

# Docker 内部 Redis 配置（仅在使用 --profile redis 时需要）
REDIS_CONTAINER_PASSWORD=
REDIS_PORT=6379

# ================================================================
# 其他配置
# ================================================================

# AI 大模型配置（支持 OpenAI 格式）
# 支持 OpenAI、智谱AI、DeepSeek、通义千问等任何兼容 OpenAI 格式的 API

# 示例 1: OpenAI
# AI_API_KEY=sk-your-openai-api-key
# AI_BASE_URL=https://api.openai.com/v1
# AI_MODEL=gpt-3.5-turbo

# 示例 2: 智谱AI
# AI_API_KEY=your_zhipuai_api_key
# AI_BASE_URL=https://open.bigmodel.cn/api/paas/v4
# AI_MODEL=glm-4.7

# 示例 3: DeepSeek
# AI_API_KEY=sk-your-deepseek-api-key
# AI_BASE_URL=https://api.deepseek.com/v1
# AI_MODEL=deepseek-chat

# 示例 4: 通义千问
# AI_API_KEY=sk-your-qwen-api-key
# AI_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
# AI_MODEL=qwen-turbo

# 爬虫配置
CRAWLER_TIMEOUT=30
CRAWLER_MAX_ARTICLES=10
CRAWLER_DELAY=1.0

# AI 总结并发数
AI_SUMMARY_CONCURRENT=10

# ================================================================
# 速率限制配置
# ================================================================
RATE_LIMIT_ENABLED=True    # 是否启用速率限制
RATE_LIMIT_PER_MINUTE=60   # 每分钟最多请求次数（生产环境可设置更高）

# ================================================================
# API 安全配置
# ================================================================
# API 密钥
API_KEY=your-secret-api-key-here

# 定时任务配置（crontab 表达式：分 时 日 月 周）
SCHEDULE_CRONTAB=0 8 * * *

